/*!CK:327867918!*//*1458859454,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["iM3lk"]); }

__d("SearchAwarenessEventTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLICK:"click",IMPRESSION:"impression",DISMISSAL:"dismissal",WEAK_DISMISSAL:"weak_dismissal",SYSTEM_FORCED_DISMISSAL:"system_forced_dismissal"};},null);
__d("SearchAwarenessUserAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE:"like",COMMENT:"comment",ARTICLE_CLICK:"article_click",COMPOSE_PUBLISH:"compose_publish",PAGE_LIKE:"page_like"};},null);
__d("SearchPivotType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PHOTO:"photo",PHOTO_EXPERIMENTAL:"photo_experimental",VIDEO:"video",FEED_SEARCH_KEYWORDS:"feed_search_keywords",SEARCH_AWARENESS_KEYWORDS:"search_awareness_keywords",ARTICLE_CLICK_ACTION:"ARTICLE_CLICK_ACTION",STORY_CLICK_ACTION:"STORY_CLICK_ACTION",STORY_LIKE_ACTION:"STORY_LIKE_ACTION",STORY_UNLIKE_ACTION:"STORY_UNLIKE_ACTION",STORY_COMMENT_DELETE_ACTION:"STORY_COMMENT_DELETE_ACTION",COMPOSER_PUBLISH_ACTION:"COMPOSER_PUBLISH_ACTION",FAN_PAGE_ACTION:"FAN_PAGE_ACTION",TRENDING_SERP_LOAD:"TRENDING_SERP_LOAD",PHOTOS_SERP_LOAD:"PHOTOS_SERP_LOAD",STORY_COMMENT_ACTION:"STORY_COMMENT_ACTION",SCROLL_ACTION:"SCROLL_ACTION",NEWS_FEED:"NEWS_FEED",PAGE:"PAGE",GROUP:"GROUP",NEWS_FEED_SECONDARY:"NEWS_FEED_SECONDARY",POST_SEARCH_SERP:"POST_SEARCH_SERP",LEARNING_NUX:"LEARNING_NUX",LEARNING_NUX_SECOND_STEP:"LEARNING_NUX_SECOND_STEP",MOBILE_STORY_LIKE_ACTION:"MOBILE_STORY_LIKE_ACTION",MOBILE_STORY_COMMENT_ACTION:"MOBILE_STORY_COMMENT_ACTION",MOBILE_COMMENT_LIKE_ACTION:"MOBILE_COMMENT_LIKE_ACTION",TIMELINE:"TIMELINE",NEXT_TRENDING:"NEXT_TRENDING",LEARNING_NUX_STANDALONE:"LEARNING_NUX_STANDALONE",TUTORIAL_NUX:"TUTORIAL_NUX",FEED_READ_ACTION:"FEED_READ_ACTION"};},null);
__d('getElementChildren',['isElementNode'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return Array.from(i.children||i.childNodes).filter(c('isElementNode'));}f.exports=h;},null);
__d('StaticContainer.react',['React'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.shouldComponentUpdate=function(k){'use strict';return !!k.shouldUpdate;};j.prototype.render=function(){'use strict';var k=this.props.children;if(k===null||k===false)return null;return c('React').Children.only(k);};function j(){'use strict';h.apply(this,arguments);}f.exports=j;},null);
__d("XSearchAwarenessController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/async\/awareness\/",{origin:{type:"String"},story_id:{type:"String"},actor_id:{type:"String"},global_share_id:{type:"String"},query:{type:"String"},dismiss:{type:"Exists",defaultValue:false},source_object_id:{type:"String"},user_action:{type:"String"}});},null);
__d('SearchAwarenessDismissButton',['Arbiter','AsyncRequest','DOM','EventListener','XSearchAwarenessController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function(i,j,k,l){var m=c('EventListener').listen(j,'click',function(){c('DOM').remove(i);m.remove();c('Arbiter').inform('SearchAwareness.dismissUnit');h.dismiss(k,l);});},dismiss:function(i,j){var k=c('XSearchAwarenessController').getURIBuilder().setString('origin',i).setString('source_object_id',j).setExists('dismiss',true);new (c('AsyncRequest'))().setURI(k.getURI()).send();}};f.exports=h;},null);
__d('SearchAwarenessDispatcher',['csx','cx','Arbiter','AsyncRequest','AttachmentRelatedShareConstants','Banzai','CSS','DOM','EventListener','NavigationMessage','PageLikeConstants','Run','SearchAwarenessDismissButton','SearchAwarenessEventTypes','SearchAwarenessUserAction','SearchAwarenessWebConfig','SearchPivotType','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','XSearchAwarenessController','getScrollPosition','joinClasses','setTimeoutAcrossTransitions','throttle'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=false,k={},l={},m,n={init:function(){if(!c('SearchAwarenessWebConfig').master_gk)return;if(j)return;m=new (c('SubscriptionsHandler'))();m.addSubscriptions(c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,n._cleanup.bind(this)),c('Arbiter').subscribe(c('PageLikeConstants').LIKED,n._onFan.bind(this)),c('Arbiter').subscribe('composer/publish',n._onComposerPublish.bind(this)),c('Arbiter').subscribe('LitestandComposer/publish',n._onComposerPublish.bind(this)),c('Arbiter').subscribe(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,n._onArticleClick.bind(this)));c('Run').onLeave(n._cleanup.bind(this));j=true;},_cleanup:function(){m&&m.release();m=null;j=false;var o=c('DOM').scry(document.body,"._18az")[0];if(o==null)return;c('CSS').removeClass(document.body,"_18at");c('CSS').removeClass(document.body,"_18au");c('CSS').removeClass(document.body,"_18aw");c('CSS').removeClass(o,"_18ax");},_onFan:function(o,p){if(!c('SearchAwarenessWebConfig').has_on_fan)return;n._dispatch(p.target,{origin:c('SearchPivotType').FAN_PAGE_ACTION,actor_id:p.profile_id,user_action:c('SearchAwarenessUserAction').PAGE_LIKE});},_onLike:function(o,p){if(!p.ft_id)return;c('UFIFeedbackTargets').getFeedbackTarget(p.ft_id,function(q){var r=q.entidentifier;if(r==null||k[r]!=null)return;k[r]=true;n._dispatch(p.target,{actor_id:q.actorid,story_id:q.entidentifier,origin:p.origin,query:p.query,user_action:c('SearchAwarenessUserAction').LIKE});});},_onPhotoClick:function(o,p){if(!c('SearchAwarenessWebConfig').has_on_photo_click)return;n._dispatch(p.target,{story_id:p.storyid,origin:c('SearchPivotType').STORY_CLICK_ACTION});},_onArticleClick:function(o,p){if(!c('SearchAwarenessWebConfig').has_on_article_click)return;var q=p.global_share_id!=null?String(p.global_share_id):null;n._dispatch(null,{global_share_id:q,story_id:p.share_id,origin:c('SearchPivotType').ARTICLE_CLICK_ACTION,user_action:c('SearchAwarenessUserAction').ARTICLE_CLICK});},initOnComment:function(o,p){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();if(m==null)return;m.addSubscriptions(c('Arbiter').subscribe('UFI/CommentAddedActive',function(q,r){var s={origin:o,query:p,ft_id:r};n._onComment(q,s);}));},_onComment:function(o,p){if(!p.ft_id)return;c('UFIFeedbackTargets').getFeedbackTarget(p.ft_id,function(q){var r=q.entidentifier;if(r==null||l[r]!=null)return;l[r]=true;n._dispatch(p.target,{actor_id:q.actorid,story_id:q.entidentifier,origin:p.origin,query:p.query,user_action:c('SearchAwarenessUserAction').COMMENT});});},_onComposerPublish:function(o,p){if(!c('SearchAwarenessWebConfig').has_on_composer_publish)return;n._dispatch(null,{story_id:p.content_id,origin:c('SearchPivotType').COMPOSER_PUBLISH_ACTION,user_action:c('SearchAwarenessUserAction').COMPOSE_PUBLISH});},initOnLike:function(o,p,q){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();if(m==null)return;m.addSubscriptions(c('Arbiter').subscribe(c('UFIUIEvents').ReactionButtonClicked,function(r,s){s.origin=o;s.query=p;if(q)s.target=null;n._onLike(r,s);}));},onPageLoad:function(o,p,q){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();n._dispatch(null,{query:p,origin:o,actor_id:q});},initProfileScopedSearch:function(){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();if(m==null)return;var o=c('DOM').scry(document.body,"._5ibl")[0];if(o!=null){n._dispatch(o,{origin:c('SearchPivotType').TIMELINE,specified_target:true});}else m.addSubscriptions(c('Arbiter').subscribe('profileSearchBoxLoaded',function(){var p=c('DOM').scry(document.body,"._5ibl")[0];if(p==null)return;n._dispatch(p,{origin:c('SearchPivotType').TIMELINE,specified_target:true});}));},onPhotosSERPLoad:function(o){if(o==null||!c('SearchAwarenessWebConfig').master_gk)return;n._dispatch(null,{query:o,origin:c('SearchPivotType').PHOTOS_SERP_LOAD});},_dispatch:function(o,p,q){if(!p.origin)return true;var r=c('XSearchAwarenessController').getURIBuilder().setString('origin',p.origin);if(p.story_id)r.setString('story_id',p.story_id);if(p.actor_id)r.setString('actor_id',p.actor_id);if(p.global_share_id)r.setString('global_share_id',p.global_share_id.toString());if(p.query)r.setString('query',p.query);if(p.user_action)r.setString('user_action',p.user_action);var s=new (c('AsyncRequest'))().setURI(r.getURI()),t=o;if(o!=null&&!p.specified_target)t=this.findStory(o);if(t==null){var u=c('DOM').scry(document.body,"._585-")[0],v=c('DOM').scry(document.body,"._5ob9")[0];t=u!=null?u:v;}if(t)s.setRelativeTo(t);if(q)s.setHandler(q);if(t||q)s.send();return true;},showAwarenessExperienceNow:function(o,p,q){if(!j)n.init();if(p==null||!j||m==null)return;var r=void 0;m.addSubscriptions(p.subscribe('cancel',function(){r=true;c('SearchAwarenessDismissButton').dismiss(o);}),p.subscribe('hide',function(){if(!r&&q){c('Banzai').post('search_awareness',{origin:o,event_type:c('SearchAwarenessEventTypes').WEAK_DISMISSAL},{signal:true});}else if(!r&&!q)c('Banzai').post('search_awareness',{origin:o,event_type:c('SearchAwarenessEventTypes').SYSTEM_FORCED_DISMISSAL},{signal:true});}),c('Arbiter').subscribe('SearchAwareness.weakDismissUnit',function(){if(p!=null){r=false;p.hide();}}),c('Arbiter').subscribe('SearchAwareness.dismissUnit',function(){if(p!=null){r=true;p.hide();}}));p.show();c('Run').onLeave(function(){p=null;});},findStory:function(o){var p="^div._4-u2",q=c('DOM').scry(o,p);return q.length===1?q[0]:null;},onTrendingSERPLeave:function(o,p){if(!j)n.init();if(o==null||!j)return;c('Run').onLeave(function(){c('setTimeoutAcrossTransitions')(function(){c('Run').onAfterLoad(function(){n._dispatch(null,{query:o,origin:c('SearchPivotType').TRENDING_SERP_LOAD});});},p);});},openBelowBluebarUnit:function(o){if(!j)n.init();var p=c('DOM').scry(document.body,"._18a-")[0];if(p==null)return;var q;switch(o){case c('SearchPivotType').TRENDING_SERP_LOAD:q="_18at";break;case c('SearchPivotType').GROUP:q="_18au";break;case c('SearchPivotType').PAGE:q="_18aw";break;}if(q==null)return;c('CSS').addClass(document.body,q);c('CSS').addClass(p,"_18ay");var r=c('Arbiter').subscribe('SearchAwareness.dismissUnit',function(){c('CSS').removeClass(document.body,q);});m&&m.addSubscriptions(r);},trigger:function(o,p,q,r,s){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();n._dispatch(null,{query:p,origin:o,actor_id:q,story_id:r,global_share_id:s});},triggerLearningNUX:function(o,p,q,r,s){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();n._dispatch(null,{query:p,origin:o,actor_id:q,story_id:r,global_share_id:s},function(t){var u=c('DOM').create('div',{className:c('joinClasses')("_3lik","hidden_elem"),'data-origin':o});c('DOM').appendContent(u,t.payload);c('DOM').appendContent(document.body,u);setTimeout(function(){c('Arbiter').inform('SearchAwareness.triggerLearningNUX',{origin:o});},0);});},onTimelineScroll:function(o,p,q,r){if(!c('SearchAwarenessWebConfig').master_gk)return;if(!j)n.init();var s=false,t=c('EventListener').listen(document,'scroll',c('throttle')(function(event){if(!s&&c('getScrollPosition')(window).y>p){s=true;n.onPageLoad(o,q,r);t.remove();}},500));}};f.exports=n;},null);
__d("XWarmUserRequestArgsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/search\/browse\/warm\/requestargs\/",{});},null);
__d('TypeaheadEarlyUserRequest',['AsyncRequest','XWarmUserRequestArgsController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._core=i.getCore();this._listener=null;}h.prototype.enable=function(){'use strict';this._listener=this._core.subscribe('focus',function(i,j){new (c('AsyncRequest'))().setURI(c('XWarmUserRequestArgsController').getURIBuilder().getURI()).send();this.disable();}.bind(this));};h.prototype.disable=function(){'use strict';this._listener&&this._core.unsubscribe(this._listener);};f.exports=h;},null);